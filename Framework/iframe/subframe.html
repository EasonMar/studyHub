<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>subframe</title>
		<style>
			.tencent {
				margin-top: 40px;
			}
		</style>
	</head>
	<body>
		<h1>subFrame</h1>
		<a href="https://hfx.net">和飞信</a>
		<a href="./sameorigin.html">同域子页面</a>
		<a href="https://www.tencent.com">Tencent</a>
		<div class="tencent">Tencent JS 跳转</div>
	</body>
	<script>
		var tencent = document.querySelector('.tencent');
		tencent.addEventListener('click', function () {
			try {
				console.log(top);
				console.log(parent);
				parent.location.href = self.location.href;
				top.location.href = self.location.href;
				// 如果父页面设置了 sandbox="allow-same-origin allow-scripts" 而没设置 allow-top-navigation
				// Unsafe JavaScript attempt to initiate navigation for frame with URL 'http://192.168.0.110:8080/'
				// from frame with URL 'http://192.168.0.110:8080/subframe.html'.
				// The frame attempting navigation of the top-level window is sandboxed,
				// but the flag of 'allow-top-navigation' or 'allow-top-navigation-by-user-activation' is not set.
			} catch (error) {
				console.log(error);
			}

			// window.location.href = 'https://www.tencent.com';
		});
	</script>
</html>
