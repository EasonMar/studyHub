<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Vue Test</title>
	<style>
		body{
			margin: 50px;
		}
		div{
			padding: 10px;
		}
	</style>
	<script type="text/javascript" src="js/vue_v2.5.17.js"></script>
</head>
<body>
	<!-- 自定义指令(含参数) -->
	<div id="app" v-demo-directive:bgcolor="bgc">
		
		<!-- 更复杂的directive - expression/表达式 -->
		<div v-demo="{color:'white',text:'hello'}"></div>

	</div>
</body>
<script type="text/javascript">
    /**
     * 指令钩子函数会被传入以下参数：
     * 
     * el：指令所绑定的元素，可以用来直接操作 DOM 。
     * 
     * binding：一个对象，包含以下属性：
     *    name：指令名，不包括 v- 前缀。
     *  ★value：指令的绑定值，例如：v-my-directive="1 + 1" 中，绑定值为 2。
     *    oldValue：指令绑定的前一个值，仅在 update 和 componentUpdated 钩子中可用。无论值是否改变都可用。
     *    expression：字符串形式的指令表达式。例如 v-my-directive="1 + 1" 中，表达式为 "1 + 1"。
     *  ★arg：传给指令的参数，可选。例如 v-my-directive:foo 中，参数为 "foo"。
     *    modifiers：一个包含修饰符的对象。例如：v-my-directive.foo.bar 中，修饰符对象为 { foo: true, bar: true }。
     *    
     * vnode：Vue 编译生成的虚拟节点。移步 VNode API 来了解更多详情。
     * oldVnode：上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。
     */ 
    
    // 这里指令名可以用"驼峰"写法
	// Vue.directive('demoDirective',{
	// 当然也可以使用中横杠
	Vue.directive('demo-directive',{
        bind: function(el, binding, vnode){
        	el.style.color = "#fff";
        	el.style.backgroundColor = binding.value;
        	el.innerHTML =
		    'name: '       + binding.name + '<br>' +
		    'value: '      + binding.value + '<br>' +
		    'expression: ' + binding.expression + '<br>' +
		    'argument: '   + binding.arg + '<br>' +
		    'vnode keys: ' + Object.keys(vnode).join(', ')
        }
	});

	// 不传object的话，默认的钩子函数就是bind
	Vue.directive('demo', function(el, binding, vnode){
		console.log(binding.value);
	});

	new Vue({
		el: '#app',
		data: {
			bgc: 'black'
		}
	});
</script>
</html>